mutation CreateNewsItem($title: String!, $content: String!, $category: String, $imageUrl: String) @auth(level: USER) {
  newsItem_insert(data: {
    title: $title,
    content: $content,
    category: $category,
    imageUrl: $imageUrl,
    posterId_expr: "auth.uid"
  })
}

query ListBusinessesByCategory($category: String!) @auth(level: PUBLIC, insecureReason: "This operation is safe to expose to the public") {
  businesses(where: {category: {eq: $category}}) {
    id
    name
    address
    contactNumber
    operatingHours
    website
    description
    imageUrl
  }
}

mutation UpdateUserProfile($bio: String, $location: String, $photoUrl: String, $displayName: String) @auth(level: USER, insecureReason: "This operation is safe to expose to all logged in users.") {
  user_update(
    key: {id_expr: "auth.uid"},
    data: {
      bio: $bio,
      location: $location,
      photoUrl: $photoUrl
      displayName: $displayName
    }
  )
}

query ListEventsForUser @auth(level: USER) {
  events(where: {organizerId: {eq_expr: "auth.uid"}}) {
    id
    name
    description
    location
    eventDate
    category
    contactInfo
    imageUrl
  }
}